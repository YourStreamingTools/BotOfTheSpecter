# Changelog - Version 5.7.4 (2026-02-06)

## Version Information

* Updated version from 5.7.3 to 5.7.4
* Hotfix for the Stable bot: critical fix for the `!joke` command

## Bug Fixes

* **Fixed `!joke` command error**
  * Resolved an exception where the command could fail with "'list' object has no attribute 'get'".
  * Ensured the JokeAPI client is used correctly (constructor is not awaited) and `get_joke()` is executed off the event loop to avoid blocking.
  * Normalized API responses so both dict and list shapes are handled safely; unexpected shapes are coerced to a safe dict.
  * Added defensive parsing of `joke_settings.blacklist` with sensible defaults and added fallback messaging if a joke cannot be delivered.

## Technical Details

* The root cause was misuse of `await` on the JokeAPI client and assumptions about the return shape from `get_joke()`.
* Fixes implemented:
  * Instantiate `Jokes()` synchronously and call `get_joke()` via `get_event_loop().run_in_executor(...)`.
  * Normalize the response to a dict before accessing `.get()`; handle lists by selecting the first valid item.
  * Use safe `.get()` calls and add a friendly fallback chat message if sending the joke fails.

**Thank you for your feedback and support!**

As always, your feedback is appreciated. Please report any issues, bugs, or suggestions in the #ticket-info channel on our Discord server. You can also submit feedback and bug reports directly on our website: [https://botofthespecter.com/feedback.php](https://botofthespecter.com/feedback.php)
